{{ if .Site.Params.Gitalk.enabled }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script>
const sp = location.pathname.split('/');
let id = sp[sp.length - 1];
if (id == "") id = sp[sp.length - 2];

const gitalk = new Gitalk({
  clientID: {{ .Site.Params.Gitalk.clientID }},
  clientSecret: {{ .Site.Params.Gitalk.clientSecret }},
  repo: {{ .Site.Params.Gitalk.repo }},
  owner: {{ .Site.Params.Gitalk.owner }},
  admin: {{ .Site.Params.Gitalk.admin }},
  id: decodeURI(id),      // Ensure uniqueness and length less than 50
  distractionFreeMode: false  // Facebook-like distraction free mode
})

gitalk.render('gitalk-container')
</script>
<style type="text/css" media="screen">
.gt-container .gt-header-textarea,
.gt-container .gt-comment-content,
.gt-container .gt-comment-body,
.gt-container .gt-header-preview  {
  text-align: left;
  background-color: #002b36 !IMPORTANT;
  color: #eee8d5 !IMPORTANT;
}
.gt-container .gt-header-textarea:hover {
  background-color: #002b36;
}
.gt-container .gt-btn-preview {
  background-color: #002b36;
}
</style>
{{ end }}
